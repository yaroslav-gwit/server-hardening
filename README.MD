# Script overview
This command will check if the system is up to date on hardening, and report any failed checks:
```
cd /root/server-hardening/
source bin/activate
./centos7-hardening.py
```

Example output:
```
(server-hardening) root@centos7-small ~/server-hardening# ./centos7-hardening.py 
╒════╤══════════════════════════════════════════════════════╤══════════╤═════════════════════════════════════════════════╕
│    │ Task name                                            │ Status   │ Details                                         │
╞════╪══════════════════════════════════════════════════════╪══════════╪═════════════════════════════════════════════════╡
│  1 │ CramFS                                               │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│  2 │ UDF File Systems                                     │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│  3 │ /TMP/ is configured as tmpfs                         │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│  4 │ /TMP/ noexec                                         │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│  5 │ /TMP/ nodev                                          │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│  6 │ /TMP/ nosuid                                         │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│  7 │ /DEV/SHM/ is configured                              │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│  8 │ /DEV/SHM/ noexec                                     │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│  9 │ /DEV/SHM/ nodev                                      │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 10 │ /DEV/SHM/ nosuid                                     │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 11 │ /VAR/ partition check                                │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 12 │ /VAR/TMP/ partition check                            │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 13 │ /VAR/TMP/ noexec                                     │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 14 │ /VAR/TMP/ nodev                                      │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 15 │ /VAR/TMP/ nosuid                                     │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 16 │ /VAR/LOG/ partition check                            │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 17 │ /VAR/LOG/AUDIT/ partition check                      │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 18 │ /HOME/ partition check                               │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 19 │ /HOME/ nodev                                         │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 20 │ Removable media noexec                               │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 21 │ Removable media nodev                                │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 22 │ Removable media nosuid                               │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 23 │ Sticky bit check                                     │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 24 │ Disable automounting                                 │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 25 │ Disable USB Storage                                  │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 26 │ GPG Check is globally activated                      │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 27 │ AIDE is installed                                    │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 28 │ AIDE is scheduled to run periodically                │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 29 │ GRUB2 is password protected                          │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 30 │ GRUB2 config only accessible by root                 │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 31 │ Authentication for single user mode                  │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 32 │ Resticted core dumps                                 │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 33 │ XD/NX support is enabled                             │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 34 │ Address space layout randomization (ASLR) is enabled │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 35 │ prelink is not installed                             │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 36 │ SELinux is installed                                 │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 37 │ SELinux is not disabled during boot                  │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 38 │ SELinux policy is configured                         │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 39 │ SELinux mode is enforcing or permissive              │ Passed   │ We are running SELinux in permissive mode only. │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 40 │ No unconfined services exist                         │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 41 │ SETroubleshoot is not installed                      │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 42 │ mcstrans is not installed                            │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 43 │ Message of the day is configured                     │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 44 │ Local login warning banner is configured             │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 45 │ Remote login warning banner is configured            │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 46 │ Permissions on /etc/motd                             │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 47 │ Permissions on /etc/issue                            │ Passed   │ -                                               │
├────┼──────────────────────────────────────────────────────┼──────────┼─────────────────────────────────────────────────┤
│ 48 │ Permissions on /etc/issue.net                        │ Passed   │ -                                               │
╘════╧══════════════════════════════════════════════════════╧══════════╧═════════════════════════════════════════════════╛
Total System Hardening Points: 48

To do:
 - Configure and check automatic updates. Page 148.
```

<br>
<br>

# Script installation
Install `python3` and `python3-pip`
```
yum install python3 python3-pip
```

From root user, run this command:
```
git clone https://github.com/yaroslav-gwit/server-hardening.git
```

Initialize virtual environment:
```
cd
cd server-hardening
python3 -m venv .
```

Activate the virtual environment:
```
source bin/activate
```

Install PIP dependencies:
```
python3 -m pip install --upgrade pip
python3 -m pip install -r requirements.txt
```

<br>
<br>

# Script removal
It's enough to remove the folder that was created by `git clone` command. From `root` user run this sequense of commands:
```
rm -rf /root/server-hardening
```

<br>
<br>

# Update to the latest verion
Run this from `root` user to update this script to the latest verion:
```
cd
cd server-hardening
git pull
```

That's it. You are running the latest version of a script.